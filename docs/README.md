# **Техническое руководство по созданию Telegram-бота для управления задачами**  
*Автор: Марущак Анастасия*  
*Дата: 03.05.2025*  

---

## **Содержание**  
1. [Введение](#введение)  
2. [Исследование предметной области](#исследование-предметной-области)  
3. [Техническое руководство](#техническое-руководство)  
   - [3.1. Установка и настройка](#31-установка-и-настройка)  
   - [3.2. Архитектура проекта](#32-архитектура-проекта)  
   - [3.3. Реализация бота](#33-реализация-бота)  
   - [3.4. Работа с базой данных](#34-работа-с-базой-данных)  
   - [3.5. Планировщик задач](#35-планировщик-задач)  
4. [Примеры кода](#примеры-кода)  
5. [Иллюстрации](#иллюстрации)  
6. [Заключение](#заключение)  


---

## **1. Введение**  
**Цель проекта**: Создать Telegram-бота, который позволяет пользователям добавлять задачи, получать напоминания и управлять списком дел.  

**Функционал бота**:  
- Добавление задач с указанием времени.  
- Уведомления в заданный срок.  
- Просмотр активных и выполненных задач.  
- Удаление и отметка задач как выполненных.  

**Стек технологий**:  
- **Python 3.11** (основной язык)  
- **Aiogram 3.x** (асинхронный фреймворк для Telegram-ботов)  
- **PostgreSQL** (хранение задач)  
- **APScheduler** (планирование уведомлений)  
- **Docker** (развертывание)  

---

## **2. Исследование предметной области**  
### **2.1. Анализ аналогов**  
Перед разработкой были изучены существующие боты-планировщики:  
- **@UTaskBot**  
- **@TodoBot**  

**Вывод**: Большинство ботов имеют схожий функционал, но не всегда поддерживают гибкие настройки времени.  

### **2.2. Выбор технологий**  
| Технология | Почему выбрана? |  
|------------|----------------|  
| **Aiogram** | Лучший асинхронный фреймворк для Telegram. |  
| **PostgreSQL** | Надежная реляционная БД для хранения задач. |  
| **Docker** | Упрощает развертывание и масштабирование. |  

---

## **3. Техническое руководство**  
### **3.1. Установка и настройка**  

#### **Шаг 1: Установка Docker**  
Сначала установите Docker на вашу систему.

#### **Шаг 2: Клонирование репозитория**  
Склонируйте репозиторий с ботом с помощью следующей команды:
```bash
git clone <URL_репозитория>
```

#### **Шаг 3: Переход в папку репозитория**  
```bash
cd <имя_папки_репозитория>
```

#### **Шаг 4: Настройка .env**  
Создайте файл .env в папке config/ и заполните его необходимыми переменными окружения.

#### **Шаг 3: Запуск через Docker**  
```bash
docker-compose up --build
```

---

### **3.2. Архитектура проекта**  
![изображение](https://github.com/user-attachments/assets/f723ddce-a842-4a1e-a134-deb018b0a73d)


---

### **3.3. Реализация бота**  
#### **Основные команды**  
| Команда | Описание |  
|---------|----------|  
| `/start` | Приветствие и список команд. |  
| `/add_task` | Добавить новую задачу. |  
| `/my_tasks` | Список активных задач. |  

#### **Пример кода (роутер бота)**  
```python
@router.message(F.text == "/start")
async def start(message: Message):
    await message.answer(
        "Добро пожаловать! Используйте команды:\n"
        "/add_task - Добавить задачу\n"
        "/my_tasks - Мои задачи"
    )
```

---

### **3.4. Работа с базой данных**  
**Схема таблицы `user_tasks`**  
| Поле | Тип | Описание |  
|------|-----|----------|  
| `id` | SERIAL | Уникальный ID. |  
| `user_id` | BIGINT | ID пользователя в Telegram. |  
| `task_text` | TEXT | Текст задачи. |  
| `due_date` | TIMESTAMP | Время выполнения. |  

**Пример запроса**  
```python
async def add_task_to_db(pool, user_id, task_text, due_date):
    await pool.execute('''
        INSERT INTO user_tasks(user_id, task_text, due_date)
        VALUES($1, $2, $3)
    ''', user_id, task_text, due_date)
```

---

### **3.5. Планировщик задач**  
**Логика работы APScheduler**  
```python
scheduler.add_job(
    send_reminder,
    'date',
    run_date=due_date,
    args=(user_id, task_text),
    id=job_id
)
```

---

## **4. Примеры кода**  
### **4.1. Конфигурация бота**  
```python
from aiogram import Bot, Dispatcher

bot = Bot(token="BOT_TOKEN")
dp = Dispatcher()
```

### **4.2. Обработка команды `/add_task`**  
```python
@router.message(F.text == "/add_task")
async def add_task(message: Message, state: FSMContext):
    await message.answer("Введите описание задачи:")
    await state.set_state(FSMTask.enter_task_text)
```

---

## **5. Иллюстрации**  
### **5.1. Схема работы бота**  
![изображение](https://github.com/user-attachments/assets/518e6c35-7239-413e-8cc0-dc45a6031ab2)
Рисунок 1. Схема работы бота.


### **5.2. Интерфейс пользователя**  
#### **5.2.1. Приветствие и список команд**
![изображение](https://github.com/user-attachments/assets/343abaab-bf8a-4041-9ae6-f0b79b6142b4)
Рисунок 2. Приветственное сообщение бота с доступными командами.


![изображение](https://github.com/user-attachments/assets/a80a4383-dd3e-488e-b391-3b44c7d03ada)
Рисунок 3. Меню со всеми доступными командами, для удабства пользователя. 


#### **5.2.2. Добавление новой задачи**
![изображение](https://github.com/user-attachments/assets/b79eaa7e-e072-4a43-b09c-f2f96029a674)
Рисунок 4. Интерфейс для добавления новой задачи, где пользователь вводит описание задачи.


![изображение](https://github.com/user-attachments/assets/c3e0011a-092b-4d78-b016-8560b88f6654)
Рисунок 5. Интерфейс установки даты и времени уведомления для новой задачи.


![изображение](https://github.com/user-attachments/assets/e3ea5f38-2b99-4513-b321-64f47a025808)
Рисунок 6. Подтверждение задачи после нажатия на кнопку "Подтвердить".


#### **5.2.3. Список активных задач**
![изображение](https://github.com/user-attachments/assets/3d4a2aa7-cc94-4441-84a4-13d6bd6361e0)
Рисунок 7. Список активных задач, отображаемый пользователю, с возможностью просмотра и управления задачами.


#### **5.2.4. Уведомление о сроке выполнения**
![изображение](https://github.com/user-attachments/assets/13579afa-ace1-4dff-addc-dc56034c931e)
Рисунок 8. Уведомление, отправляемое пользователю о приближающемся сроке выполнения задачи.


#### **5.2.5. Список завершенных задач**
![изображение](https://github.com/user-attachments/assets/80bf0006-616f-410d-a2bf-09f5c4b8eb73)
Рисунок 9. Список завершенных задач, отображаемый пользователю.

 

### **5.3. ER-диаграмма базы данных**  
![изображение](https://github.com/user-attachments/assets/c85815eb-f92f-44cd-81c3-17135c8e8eab)


---

## **6. Заключение**  
В ходе реализации проекта был успешно создан Telegram-бот для управления задачами.

Бот обладает функционалом добавления задач с указанием сроков исполнения, генерации уведомлений о приближающихся дедлайнах и возможностью просмотра списка активных и завершенных задач.

Применение современных технологий, таких как Python, Aiogram и PostgreSQL, позволило разработать надежное и масштабируемое решение. Использование Docker-контейнеризации упростило процесс развертывания и управления зависимостями, что делает проект перспективным для дальнейшего развития и совершенствования.

